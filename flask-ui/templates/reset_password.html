{% extends "base.html" %} {% block title %}Reset Password{% endblock %} {% block
content %}
<div class="flex items-start justify-center min-h-screen bg-gray-50 py-16">
  <div class="w-full max-w-md bg-white p-8 rounded-lg shadow-lg">
    <h2 class="text-2xl font-bold text-center text-green-600 mb-6">
      Reset your password
    </h2>
    <p class="text-center text-gray-600 mb-6">Choose a new password below.</p>
    <form method="POST" class="space-y-4">
      <input type="hidden" name="token" value="{{ token }}" />
      <div>
        <label for="new_password" class="sr-only">New password</label>
        <div class="relative">
          <input
            id="new_password"
            name="new_password"
            type="password"
            required
            placeholder="••••••••"
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-400"
          />
          <button
            type="button"
            aria-label="Show or hide password"
            class="toggle-password absolute inset-y-0 right-0 pr-3 flex items-center"
          >
            <!-- Eye open: outline + pupil -->
            <svg
              class="eye-open-icon hidden h-6 w-6 text-gray-600"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <!-- outline -->
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"
              />
              <!-- pupil -->
              <circle cx="12" cy="12" r="3" fill="currentColor" />
            </svg>
            <!-- Eye closed: outline only -->
            <svg
              class="eye-closed-icon h-6 w-6 text-gray-600"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <!-- outline -->
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"
              />
            </svg>
          </button>
        </div>
      </div>
      <button
        type="submit"
        class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded transition"
      >
        Set new password
      </button>
    </form>
    <p class="mt-4 text-center text-gray-600">
      <a href="/login" class="text-green-600 hover:underline">Back to Log in</a>
    </p>
  </div>
</div>

<script>
  document.querySelectorAll('.toggle-password').forEach(btn => {
    btn.addEventListener('click', () => {
      // find the sibling input in the same wrapper
      const wrapper = btn.closest('.relative');
      const input = wrapper.querySelector('input');
      const eyeOpen = wrapper.querySelector('.eye-open-icon');
      const eyeOff = wrapper.querySelector('.eye-closed-icon');

      // toggle the input type
      const hiding = input.type === 'password';
      input.type = hiding ? 'text' : 'password';

      // swap icons
      eyeOpen.classList.toggle('hidden');
      eyeOff.classList.toggle('hidden');
    });
  });
</script>
{% endblock %}
